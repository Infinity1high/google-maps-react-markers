'use strict';

var react = require('react');
var reactDom = require('react-dom');
var jsxRuntime = require('react/jsx-runtime');

var k={};function X(e){let n=document.querySelector(`script[src="${e}"]`),a=n==null?void 0:n.getAttribute("data-status");return {node:n,status:a}}function Y(e={src:"",attributes:{},callbacks:{onLoadCallback:()=>{},onErrorCallback:()=>{}},elementIdToAppend:""},n,a={removeOnUnmount:!1,shouldPreventLoad:!1}){let[l,s]=react.useState(()=>!e.src||a!=null&&a.shouldPreventLoad?"idle":typeof window>"u"?"loading":k[e.src]??"loading");return react.useEffect(()=>{var u,r,m;if(n){s(n);return}if(!(e!=null&&e.src)||a!=null&&a.shouldPreventLoad)return;let i=k[e.src];if(i==="ready"||i==="error"){s(i);return}let p=X(e.src),t=p.node;if(t){let c=p.status??i??"loading";switch(c){case"loading":case"ready":(r=e.callbacks)!=null&&r.onLoadCallback&&e.callbacks.onLoadCallback();break;case"error":(m=e.callbacks)!=null&&m.onErrorCallback&&e.callbacks.onErrorCallback();break;}s(c);}else {t=document.createElement("script"),t.src=e.src,t.async=!0,t.setAttribute("data-status","loading"),e.attributes&&Object.entries(e.attributes).length>0&&Object.entries(e.attributes).map(([d,g])=>t==null?void 0:t.setAttribute(d,g)),e.elementIdToAppend&&document.getElementById(e.elementIdToAppend)?(u=document.getElementById(e.elementIdToAppend))==null||u.appendChild(t):document.body.appendChild(t);let c=d=>{let g=d.type==="load"?"ready":"error";t==null||t.setAttribute("data-status",g);};t.addEventListener("load",c),t.addEventListener("error",c);}let o=c=>{var g,f;let d=c.type==="load"?"ready":"error";c.type==="load"?(g=e.callbacks)!=null&&g.onLoadCallback&&e.callbacks.onLoadCallback():(f=e.callbacks)!=null&&f.onErrorCallback&&e.callbacks.onErrorCallback(),s(d),k[e.src]=d;};return t.addEventListener("load",o),t.addEventListener("error",o),()=>{t&&(t.removeEventListener("load",o),t.removeEventListener("error",o)),t&&(a!=null&&a.removeOnUnmount)&&t.remove();}},[e,n,l]),l}var O=Y;var x=({apiKey:e,libraries:n=[],loadScriptExternally:a=!1,status:l="idle",externalApiParams:s,callback:i})=>{var o;typeof window<"u"&&(window.googleMapsCallback=i);let p=(o=new URLSearchParams(s))==null?void 0:o.toString(),t=e?{src:`https://maps.googleapis.com/maps/api/js?key=${e}&callback=googleMapsCallback&libraries=${n==null?void 0:n.join(",")}${p?`&${p}`:""}`,attributes:{id:"googleMapsApi"}}:{src:`https://maps.googleapis.com/maps/api/js?callback=googleMapsCallback&libraries=${n==null?void 0:n.join(",")}`,attributes:{id:"googleMapsApi"}};return O(t,a?l:void 0)};var U=(e,n,a=1e-6)=>{if(e&&n){for(let l=0;l!==e.length;++l)if(Math.abs(e[l]-n[l])>a)return !1;return !0}return !1};var Q=(e,n)=>{let a=react.useRef(),l=a.current,s=n(l,e);return react.useEffect(()=>{s||(a.current=e);}),s?l:e},A=Q;var L=e=>{try{return {lat:e==null?void 0:e.lat(),lng:e==null?void 0:e.lng()}}catch{return e}},_=({container:e,pane:n,position:a,maps:l,drag:s})=>{class i extends google.maps.OverlayView{onAdd=()=>{var u;let t=this;s!=null&&s.draggable&&(this.get("map").getDiv().addEventListener("mouseleave",()=>{google.maps.event.trigger(this.container,"mouseup");}),this.container.addEventListener("mousedown",r=>{var m;this.container.style.cursor="grabbing",(m=t.map)==null||m.set("draggable",!1),t.set("origin",r),s.onDragStart(r,{latLng:L(this.position)}),t.moveHandler=this.get("map").getDiv().addEventListener("mousemove",c=>{let d=t.get("origin"),g=d.clientX-c.clientX,f=d.clientY-c.clientY,M=t.getProjection().fromLatLngToDivPixel(t.position);if(M===null)return;let v=t.getProjection().fromDivPixelToLatLng(new l.Point(M.x-g,M.y-f));t.set("position",v),t.set("origin",c),t.draw(),s.onDrag(c,{latLng:L(v)});});}),this.container.addEventListener("mouseup",r=>{var m;(m=t.map)==null||m.set("draggable",!0),this.container.style.cursor="default",t.moveHandler&&(google.maps.event.removeListener(t.moveHandler),t.moveHandler=null),s.onDragEnd(r,{latLng:L(t.position)});}));let o=(u=this.getPanes())==null?void 0:u[this.pane];o==null||o.classList.add("google-map-markers-overlay"),o==null||o.appendChild(this.container);};draw=()=>{let o=this.getProjection().fromLatLngToDivPixel(this.position);o!==null&&(this.container.style.transform=`translate(${o.x}px, ${o.y}px)`,this.container.style.width="0px",this.container.style.height="0px");};onRemove=()=>{this.container.parentNode!==null&&(google.maps.event.clearInstanceListeners(this.container),this.container.parentNode.removeChild(this.container));};container;pane;position;map=this.getMap();moveHandler;constructor(t,o,u){super(),this.container=t,this.pane=o,this.position=u,this.moveHandler=null;}}return new i(e,n,a)},T=_;var Z=({pane:e="floatPane",position:n,map:a,maps:l,zIndex:s=0,children:i,drag:p})=>{let t=react.useMemo(()=>{let r=document.createElement("div");return r.style.position="absolute",r},[]),o=react.useMemo(()=>T({container:t,pane:e,position:n,maps:l,drag:p}),[t,p,l,e,n]),u=A(i==null?void 0:i.props,(r,m)=>r&&r.lat===m.lat&&r.lng===m.lng);return react.useEffect(()=>!o.map&&a?(o==null||o.setMap(a),()=>{o==null||o.setMap(null);}):()=>{},[a,u]),react.useEffect(()=>{t.style.zIndex=`${s}`;},[s,t]),reactDom.createPortal(i,t)},G=Z;var P=()=>{},ne=({children:e,map:n,maps:a})=>{let l=react.useMemo(()=>!n||!a?[]:react.Children.map(e,s=>{if(react.isValidElement(s)){let i={lat:s.props.lat,lng:s.props.lng},{zIndex:p,draggable:t=!1,onDragStart:o=P,onDrag:u=P,onDragEnd:r=P}=s.props||{};return s=react.cloneElement(s,{...s.props,draggable:void 0,onDragStart:void 0,onDrag:void 0,onDragEnd:void 0}),jsxRuntime.jsx(G,{position:new a.LatLng(i.lat,i.lng),map:n,maps:a,zIndex:p,drag:{draggable:t,onDragStart:o,onDrag:u,onDragEnd:r},children:s})}return null}),[e,n,a]);return jsxRuntime.jsx("div",{children:l})},$=ne;function se({children:e=null,style:n={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},defaultCenter:a,defaultZoom:l,onGoogleApiLoaded:s,onChange:i,options:p={},events:t=[]}){let o=react.useRef(null),u=react.useRef(),[r,m]=react.useState(),[c,d]=react.useState(),[g,f]=react.useState(!1),M=react.useCallback(()=>{var v,y;try{if(!r)return;let E=r.getZoom()??l,b=r.getBounds(),B=[(v=r.getCenter())==null?void 0:v.lng(),(y=r.getCenter())==null?void 0:y.lat()],h=b==null?void 0:b.getNorthEast(),S=b==null?void 0:b.getSouthWest();if(!h||!S||!b)return;let D=[S.lng(),S.lat(),h.lng(),h.lat()];U(D,u.current)||(i&&i({zoom:E,center:B,bounds:b}),u.current=D);}catch(E){console.error(E);}},[r,i]);return react.useEffect(()=>{o.current&&!r&&(m(new google.maps.Map(o.current,{center:a,zoom:l,...p})),d(google.maps));},[a,l,r,o,p]),react.useEffect(()=>{r&&(g||(s&&c&&s({map:r,maps:c,ref:o.current}),f(!0)),google.maps.event.clearListeners(r,"idle"),google.maps.event.addListener(r,"idle",M));},[g,r,c,i,s,M]),react.useEffect(()=>()=>{r&&google.maps.event.clearListeners(r,"idle");},[r]),jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx("div",{ref:o,style:n,className:"google-map",...t==null?void 0:t.reduce((v,{name:y,handler:E})=>(v[y]=E,v),{})}),e&&r&&c&&jsxRuntime.jsx($,{map:r,maps:c,children:e})]})}var q=se;var pe=react.forwardRef(({apiKey:e="",libraries:n=["places","geometry"],children:a=null,loadingContent:l="Google Maps is loading",idleContent:s="Google Maps is on idle",errorContent:i="Google Maps is on error",mapMinHeight:p="unset",containerProps:t={},loadScriptExternally:o=!1,status:u="idle",scriptCallback:r=()=>{},externalApiParams:m={},...c},d)=>{let g={ready:jsxRuntime.jsx(q,{...c,children:a}),loading:l,idle:s,error:i},f=x({apiKey:e,libraries:n,loadScriptExternally:o,status:u,externalApiParams:m,callback:r});return jsxRuntime.jsx("div",{ref:d,style:{height:"100%",width:"100%",overflow:"hidden",position:"relative",minHeight:p},...t,children:g[f]||null})}),ue=pe;

module.exports = ue;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.cjs.map